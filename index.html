<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>åœ¨åº«ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </title>
  <link rel="stylesheet" href="login.css" />
</head>
<body>
  <div class="login-container">
    <div class="user-icon">ğŸ‘¤</div>
    <h1>åœ¨åº«ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </h1>
    <p class="welcome-message">ã“ã®ç©ºé–“ã¯ã€ã‚ãªãŸã®è²¬ä»»ã¨èª‡ã‚Šã‚’è¡¨ç¾ã™ã‚‹å ´ã§ã™ã€‚</p>

    <!-- âœ… å…¥åŠ›æ¬„ã¨ãƒœã‚¿ãƒ³ -->
    <input type="text" id="userIdInput" placeholder="è²¬ä»»è€…ç•ªå·ã‚’å…¥åŠ›">
    <button id="loginBtn" disabled>ãƒ­ã‚°ã‚¤ãƒ³</button>

    <div class="version-label">
      ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼šv1.0.0
      <span id="editVersionBtn" class="hidden">ç·¨é›†</span>
    </div>
  </div>

  <!-- âœ… ãƒ­ã‚¸ãƒƒã‚¯ -->
  <script type="module">
    const input = document.getElementById("userIdInput");
    const roleSelect = document.getElementById("roleSelect");
    const btn = document.getElementById("loginBtn");

    // å…¥åŠ›ãŒã‚ã‚Œã°ãƒœã‚¿ãƒ³æœ‰åŠ¹åŒ–
    input.addEventListener("input", () => {
      btn.disabled = input.value.trim() === "";
    });

    // ãƒ­ã‚°ã‚¤ãƒ³å‡¦ç†
    btn.addEventListener("click", () => {
      const id = input.value.trim();
      const role = roleSelect.value;
      if (!id) return;

      // localStorage ã«ä¿å­˜
      localStorage.setItem("uid", id);
      localStorage.setItem("role", role);

      // ãƒ­ã‚°ã‚¤ãƒ³ãƒ­ã‚°ã‚’æ®‹ã—ãŸã„å ´åˆã¯ Firestore ã« addDoc ã—ã¦ã‚‚OK
      // ã“ã“ã§ã¯ç°¡ç•¥åŒ–ã—ã¦é·ç§»ã®ã¿
      alert(`ãƒ­ã‚°ã‚¤ãƒ³ã—ã¾ã—ãŸ: ${id} (${role})`);
      window.location.href = "home.html";
    });
  </script>
</body>
</html>