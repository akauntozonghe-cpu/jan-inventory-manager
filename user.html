<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>在庫管理 - 責任者画面</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header><h1>在庫管理 - 責任者画面</h1></header>
<body>
  <!-- ログイン情報表示 -->
  <div id="loginUser">ログイン情報を取得中...</div>
  <button id="btn-admin" style="display:none;">🔧 管理者メニュー</button>

  <!-- 商品登録 -->
  <section>
    <h2>📦 商品登録</h2>
    <input id="productName" placeholder="商品名">
    <input id="janCodeInput" placeholder="JANコード">
    <input id="company" placeholder="会社名">
    <input id="lotNumber" placeholder="Lot番号">
    <input id="unit" placeholder="単位">
    <input type="file" id="photo">
    <img id="preview" style="max-width:150px;">
    <button id="registerBtn">登録</button>
    <button id="startScanBtn">📷 JANスキャン</button>
    <div id="scannerWrapper" style="display:none;"><div id="scanner"></div></div>
  </section>

  <!-- 商品検索 -->
  <section>
    <h2>🔍 商品検索</h2>
    <input id="searchInput" placeholder="JANコード">
    <button id="searchBtn">検索</button>
    <button id="scanSearchBtn">📷 スキャン検索</button>
    <div id="searchScannerWrapper" style="display:none;"><div id="searchScanner"></div></div>
    <div id="searchResults"></div>
  </section>

  <!-- 管理者連絡 -->
  <section>
    <h2>📨 管理者に連絡</h2>
    <textarea id="contactMsg" placeholder="メッセージを入力"></textarea>
    <button id="contactSendBtn">送信</button>
    <div id="contactStatus"></div>
  </section>

  <!-- CSV出力 -->
  <section>
    <h2>📁 登録履歴のCSV出力</h2>
    <button id="exportCsvBtn">CSV出力</button>
  </section>

  <!-- 登録済み一覧 -->
  <section>
    <h2>📋 登録済み一覧</h2>
    <button id="loadAllBtn">一覧表示</button>
    <div id="allProducts"></div>
  </section>
  
  <!-- ✅ 管理者専用セクション：ここに追加 -->
  <section id="adminSection" style="display:none;">
    <h2>🛠 管理者メニュー</h2>

    <div class="admin-block">
      <h3>ユーザー管理</h3>
      <input id="newUserName" placeholder="名前">
      <input id="newUserNumber" placeholder="番号">
      <select id="newUserRole">
        <option value="admin">管理者</option>
        <option value="user">責任者</option>
      </select>
      <button id="addUserBtn">追加</button>
      <input id="deleteUserNumber" placeholder="削除する番号">
      <button id="deleteUserBtn">削除</button>
    </div>

    <div class="admin-block">
      <h3>操作履歴</h3>
      <input id="logUserFilter" placeholder="ユーザー名">
      <input id="logDateFilter" type="date">
      <button id="loadLogsBtn">絞り込み</button>
      <button id="exportLogsBtn">CSV出力</button>
      <div id="logList">読み込み中...</div>
    </div>
  </section>

  <!-- スクリプト読み込み -->
  <script type="module" src="main.js"></script>
</body>
    <!-- 操作履歴 -->
    <div>
      <h3>📝 操作履歴</h3>
      <input id="filterUser" placeholder="ユーザー名">
      <input id="filterAction" placeholder="操作種別">
      <button id="applyLogFilter">絞り込み</button>
      <button id="expandLogsBtn" style="display:none;">すべて見る</button>
      <div id="logList">読み込み中...</div>
    </div>
  </section>

  <!-- スクリプト読み込み -->
  <script type="module" src="main.js"></script>
</body>
</html>


